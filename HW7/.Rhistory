###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_import$population >-as.numeric(levels(csv_import$population))[csv_import$population]
csv_import$mean <- as.numeric(levels(csv_import$mean))[csv_import$mean]
csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
#
#############################################################################
#############################IMPORTS SECTION#################################
#############################################################################
#Packages#
EnsurePackage("ggmap")
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
str(csv_import)
tail(csv_import)
tail(csv_import, 50)
csv_import$median <- as.numeric(as.character(csv_import$median))
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_backup<-csv_import
csv_import$median <- as.numeric(levels(csv_import$median))
csv_import$median<-gsub(",","",csv_import$median)
csv_import$median<-gsub(" ","",csv_import$median)
csv_import$mean<-gsub(",","",csv_import$mean)
csv_import$mean<-gsub(" ","",csv_import$mean)
csv_import$population<-gsub(",","",csv_import$population)
csv_import$population<-gsub(" ","",csv_import$population)
csv_import$median <- as.numeric(levels(csv_import$median))
csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_backup<-csv_import
csv_import$median<-gsub(",","",csv_import$median)
csv_import$median<-gsub(" ","",csv_import$median)
csv_import$mean<-gsub(",","",csv_import$mean)
csv_import$mean<-gsub(" ","",csv_import$mean)
csv_import$population<-gsub(",","",csv_import$population)
csv_import$population<-gsub(" ","",csv_import$population)
csv_import$median <- as.numeric(levels(csv_import$median))
csv_import$median <- as.numeric(csv_import$median)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_backup<-csv_import
csv_import$median<-gsub(",","",csv_import$median)
csv_import$median<-gsub(" ","",csv_import$median)
csv_import$mean<-gsub(",","",csv_import$mean)
csv_import$mean<-gsub(" ","",csv_import$mean)
csv_import$population<-gsub(",","",csv_import$population)
csv_import$population<-gsub(" ","",csv_import$population)
csv_import$median <- as.numeric(csv_import$median)
levels(csv_import$mean)
as.numeric(levels(csv_import$mean))
rm(ls())
#output:
#update history:
#############################################################################
#####################HW7: Viz Map HW: Median Income##########################
#############################################################################
#
#############################################################################
############################LOCAL FUNCTIONS##################################
#############################################################################
#
EnsurePackage<-function(x){
x<-as.character(x)
if (!require(x,character.only=TRUE)){
install.packages(pkgs=x, repos="http://cran.r-project.org")
require(x, character.only=TRUE)
}
}
Numberize <- function(inputVector){
inputVector <-gsub(",","",inputVector)
inputVector <- gsub(" ", "", inputVector)
inputVector <-  as.numeric(inputVector)
}
csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_backup<-csv_import
csv_import$median<-gsub(",","",csv_import$median)
csv_import$median<-gsub(" ","",csv_import$median)
csv_import$mean<-gsub(",","",csv_import$mean)
csv_import$mean<-gsub(" ","",csv_import$mean)
csv_import$population<-gsub(",","",csv_import$population)
csv_import$population<-gsub(" ","",csv_import$population)
View(csv_import)
View(csv_import)
is.na(csv_import$mean)
na_check<-is.na(csv_import$mean)
unique(na_check)
rm(na_check)
is.factor(csv_import$mean)
testing<-as.numeric(levels(csv_import$median))[csv_import$median]
csv_backup<-csv_import
csv_import$median<-gsub(",","",csv_import$median)
csv_import$median<-gsub(" ","",csv_import$median)
csv_import$mean<-gsub(",","",csv_import$mean)
csv_import$mean<-gsub(" ","",csv_import$mean)
csv_import$population<-gsub(",","",csv_import$population)
csv_import$population<-gsub(" ","",csv_import$population)
str(csv_import)
rm(csv_backup)
rm(csv_import)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
str(csv_import)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_import$zip<-paste("0",csv_import$zip)
csv_import$zip<-gsub(" ", "", csv_import$zip)
View(csv_import)
View(csv_import)
csv_import$median <- as.numeric(csv_import$median)
csv_import$mean <- as.numeric(csv_import$mean)
csv_import$population >-as.numeric(csv_import$population)
testing<-is.na(csv_import$population)
testing
unique(testing)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-c('zip', 'median', 'mean', 'population')
csv_import$median <- as.numeric(csv_import$median)
csv_import$mean <- as.numeric(csv_import$mean)
csv_import$population <-as.numeric(csv_import$population)
csv_import$zip<-paste("0",csv_import$zip)
csv_import$zip<-gsub(" ", "", csv_import$zip)
##4) Merge the zip code information from the two data frames (merge into one dataframe)
##5) Remove Hawaii and Alaska (just focus on the lower 48 states)
#
#gnerate zipcode and create backup#
data(zipcode)
zipcode_backup<-zipcode
#Code to select only the US minus HI,AK, and DC)#
#zipcode<- sqldf("SELECT *
#      FROM zipcode
#      WHERE state NOT IN ('AA','AE','AK','AP','AS','DC','FM','GU','HI','MH','MP','PR','PW','VI') " , row.names=TRUE)
zipcode<- sqldf("SELECT *
FROM zipcode
WHERE state IN ('AL','AZ','AR','CA','CO','CT','DE','FL','GA','ID','IL','IN','IA','KS','KY','LA','ME','MD','MA','MI','MN','MS','MO','MT','NE','NV','NH','NJ','NM','NY','NC','ND','OH','OK','OR','PA','RI','SC','SD','TN','TX','UT','VT','VA','WA','WV','WI','WY') " , row.names=TRUE)
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
zipcode_joincsv<-sqldf("SELECT *
FROM zipcode
LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
write.csv(zipcode_joincsv, "joineddata.csv")
write.csv(zipcode_joincsv, "joineddata.csv")
write.csv(csv_import, "csv_cleaned_test.csv")
testing_values<-compare(zipcode$zip,csv_import$zip)
testing_values$tM #somethings not right, maybe its not even the join maybe its the importing of the CSV
just_the_zips<-sqldf("SELECT zip
FROM zipcode
LEFT JOIN (select zip from csv_import) using (zip)")
write.csv(just_the_zips, "compare zips.csv") #lets see how these stack up
just_the_zips<-sqldf("SELECT zip
FROM zipcode
LEFT JOIN (select zip from csv_import) using (csv_import.zip)")
just_the_zips<-sqldf("SELECT zip
FROM zipcode
LEFT JOIN (select zip from csv_import) using (csv_import$zip)")
testing_values<-compare(zipcode$zip,csv_import$zip)
testing_values$tM #somethings not right, maybe its not even the join maybe its the importing of the CSV
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-tolower(colnames(csv_import))
View(csv_import)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-tolower(colnames(csv_import))
View(csv_import)
csv_import<-data.frame(sapply(csv_import, Numberize))
View(csv_import)
str(csv_import)
csv_import$zip<-paste("0",csv_import$zip)
csv_import$zip<-gsub(" ", "", csv_import$zip)
str(csv_import)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-tolower(colnames(csv_import))
csv_import<-data.frame(sapply(csv_import, Numberize))
csv_import$altzip<-paste(csv_import$zip, "0") #column with 0 on the end
csv_import$zip<-gsub(" ", "", csv_import$zip)
csv_import$zip<-paste("0",csv_import$zip) #edit zip with 0 on the front
csv_import$zip<-gsub(" ", "", csv_import$zip)
View(csv_import)
View(csv_import)
csv_import$zip<-gsub(" ", "", csv_import$altzip)
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
zipcode_joincsv<-sqldf("SELECT *
FROM zipcode
RIGHT JOIN (select zip, median, mean, population from csv_import) using (zip)")
View(zipcode)
View(zipcode)
View(zipcode)
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
#zipcode_joincsv<-sqldf("SELECT *
#                      FROM zipcode
#                      LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
zipcode_joincsv<-sqldf("SELECT *
FROM csv_import
RIGHT JOIN (select zip, city, state, latitude, longitude  zipcode) using (zip)")
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
#zipcode_joincsv<-sqldf("SELECT *
#                      FROM zipcode
#                      LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
zipcode_joincsv<-sqldf("SELECT *
FROM csv_import
LEFT JOIN (select zip, city, state, latitude, longitude  zipcode) using (zip)")
View(csv_import)
View(csv_import)
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
#zipcode_joincsv<-sqldf("SELECT *
#                      FROM zipcode
#                      LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
zipcode_joincsv<-sqldf("SELECT *
FROM csv_import
LEFT JOIN (select zip, city, state, latitude, longitude from zipcode) using (zip)")
View(zipcode_joincsv)
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
#zipcode_joincsv<-sqldf("SELECT *
#                      FROM zipcode
#                      LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
#zipcode_joincsv<-sqldf("SELECT *
#                       FROM csv_import
#                       LEFT JOIN (select zip, city, state, latitude, longitude from zipcode) using (zip)")
zipcode_joincsv<-merge(zipcode, csv_import, zip)
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
#zipcode_joincsv<-sqldf("SELECT *
#                      FROM zipcode
#                      LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
#zipcode_joincsv<-sqldf("SELECT *
#                       FROM csv_import
#                       LEFT JOIN (select zip, city, state, latitude, longitude from zipcode) using (zip)")
zipcode_joincsv<-merge(zipcode, csv_import)
View(zipcode_joincsv)
source('~/github/IST687-Data-Science/HW7/LewisDB_HW7.R')
#
#############################################################################
#############################IMPORTS SECTION#################################
#############################################################################
#Packages#
EnsurePackage("compare")
EnsurePackage("ggmap")
EnsurePackage("ggplot2")
EnsurePackage("sqldf")
EnsurePackage("reprex")
EnsurePackage("zipcode")
#DataSets#
###Works on my windows 10 and mac machines by hitting the source button#
###[sets working directory to the script folder]#
this.dir <- dirname(parent.frame(2)$ofile)
setwd(this.dir)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-tolower(colnames(csv_import))
csv_import<-data.frame(sapply(csv_import, Numberize))
csv_import$zip<-paste("0",csv_import$zip) #edit zip with 0 on the front
csv_import$zip<-gsub(" ", "", csv_import$zip)
##4) Merge the zip code information from the two data frames (merge into one dataframe)
##5) Remove Hawaii and Alaska (just focus on the lower 48 states)
#
#gnerate zipcode and create backup#
data(zipcode)
zipcode_backup<-zipcode
#Code to select only the US minus HI,AK, and DC)#
#zipcode<- sqldf("SELECT *
#      FROM zipcode
#      WHERE state NOT IN ('AA','AE','AK','AP','AS','DC','FM','GU','HI','MH','MP','PR','PW','VI') " , row.names=TRUE) #select data based on what I don't
zipcode<- sqldf("SELECT *
FROM zipcode
WHERE state IN ('AL','AZ','AR','CA','CO','CT','DE','FL','GA','ID','IL','IN','IA','KS','KY','LA','ME','MD','MA','MI','MN','MS','MO','MT','NE','NV','NH','NJ','NM','NY','NC','ND','OH','OK','OR','PA','RI','SC','SD','TN','TX','UT','VT','VA','WA','WV','WI','WY') " , row.names=TRUE) #select data based on what I want
#
#Join the zipcode dataset with the csv dataset by matching zipcodes
#zipcode_joincsv<-sqldf("SELECT *
#                      FROM zipcode
#                      LEFT JOIN (select zip, median, mean, population from csv_import) using (zip)")
#zipcode_joincsv<-sqldf("SELECT *
#                       FROM csv_import
#                       LEFT JOIN (select zip, city, state, latitude, longitude from zipcode) using (zip)")
zipcode_joincsv<-merge(zipcode, csv_import)
testing_values<-compare(zipcode$zip,csv_import$zip)
testing_values$tM #somethings not right, maybe its not even the join maybe its the importing of the CSV
View(zipcode_joincsv_nona)
View(zipcode_joincsv_nona)
View(zipcode_joincsv)
View(zipcode_joincsv)
tail(csv_import)
#output:
#update history:
#############################################################################
#####################HW7: Viz Map HW: Median Income##########################
#############################################################################
#
#############################################################################
############################LOCAL FUNCTIONS##################################
#############################################################################
#
EnsurePackage<-function(x){
x<-as.character(x)
if (!require(x,character.only=TRUE)){
install.packages(pkgs=x, repos="http://cran.r-project.org")
require(x, character.only=TRUE)
}
}
Numberize <- function(inputVector){
inputVector <-gsub(",","",inputVector)
inputVector <- gsub(" ", "", inputVector)
inputVector <-  as.numeric(inputVector)
}
#
#############################################################################
#############################IMPORTS SECTION#################################
#############################################################################
#Packages#
EnsurePackage("compare")
EnsurePackage("ggmap")
EnsurePackage("ggplot2")
EnsurePackage("sqldf")
EnsurePackage("reprex")
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
#############################################################################
#
#Step 1: Load the Data
##1) Read the data using the gdata package we have previously used.
##2) Clean up the dataframe
###a. Remove any info at the front of the file that not needed
###b. Update the column names (zip, median, mean, population)
##3) Load the "zipcode" package
#see imports section for loading package
#
colnames(csv_import)<-tolower(colnames(csv_import))
csv_import<-data.frame(sapply(csv_import, Numberize))
csv_import$zip<-tr_pad(csv_import$zip, 5, "left","0")
EnsurePackage("stringr")
csv_import$zip<-tr_pad(csv_import$zip, 5, "left","0")
EnsurePackage("stringr")
csv_import$zip<-stringr::tr_pad(csv_import$zip, 5, "left","0")
?tr_pad()
csv_import$zip<-str_pad(csv_import$zip, 5, "left","0")
View(csv_import)
head(csv_import)
tail(csv_import)
##4) Merge the zip code information from the two data frames (merge into one dataframe)
##5) Remove Hawaii and Alaska (just focus on the lower 48 states)
#
#gnerate zipcode and create backup#
data(zipcode)
zipcode_joincsv<-merge(x=zipcode, y=csv_import, by="zip")
View(zipcode_joincsv)
is.na(zipcode_joincsv$mean)
test<-is.na(zipcode_joincsv$mean)
unique(test)
test<-is.na(zipcode_joincsv$population)
unique(test)
View(csv_import)
test<-is.na(zipcode_joincsv$pop)
View(csv_import)
unique(test)
test<-is.na(zipcode_joincsv$median)
unique(test)
#csv_import<-read.csv("MedianZIP-3.csv", stringsAsFactors = FALSE)
csv_import<-read.csv("Median-Cleaned.csv", stringsAsFactors = FALSE)
csv_import<-data.frame(sapply(csv_import, gsub("\\.","",csv_import)))
dedot <- function(inputVector){
inputVector <- gsub("\\.","",csv_import)
}
csv_import<-data.frame(sapply(csv_import, dedot(csv_import)))
dedot <- function(inputVector){
inputVector <- gsub("\\.","",csv_import)
}
csv_import<-data.frame(sapply(csv_import, dedot(csv_import)))
csv_import<-data.frame(sapply(csv_import, dedot))
View(csv_import)
#turn the col names to lowercase#
colnames(csv_import)<-tolower(colnames(csv_import))
zipcode_joincsv
#Check for AK, HI, DC#
test<-unique(zipcode_joincsv$state)
test
View(zipcode_joincsv)
colnames(zipcode_joincsv[,3])
colnames(zipcode_joincsv[3,])
#sort by abv
colnames(zipcode_joincsv)[3]<-"abv"
colnames(zipcode_joincsv)
zipcode_joincsv$abv<-sort(zipcode_joincsv$abv)
